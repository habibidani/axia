# Basic Nginx configuration for Laravel
events {
    worker_connections 1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    # Trust X-Forwarded headers from your local proxy
    set_real_ip_from 192.168.178.14;  # Your proxy server
    set_real_ip_from 172.0.0.0/8;     # Docker networks
    set_real_ip_from 10.0.0.0/8;      # Private networks
    real_ip_header X-Forwarded-For;
    real_ip_recursive on;

    # Enable gzip compression
    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types text/plain text/css text/xml text/javascript application/json application/javascript application/xml+rss application/rss+xml font/truetype font/opentype application/vnd.ms-fontobject image/svg+xml;

    # File upload limits
    client_max_body_size 100M;

    include /etc/nginx/conf.d/*.conf;
}